This is main bug fix